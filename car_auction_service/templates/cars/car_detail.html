{% extends "base.html" %}

{% block title %}
	{{ car }}
{% endblock %}

{% block content %}
	<p>To jest samochód {{ car }}</p>
	{% if car.owner == request.user %}
		<p>Observers: {{ car.observers }} </p>
	{% endif %}
	<p>Data opublikowania: {{ car.publish }}</p>
	
	{% if car.owner != request.user %}
		{% if request.user not in car.users_observing.all %}
			<a href="{% url 'cars:car_observe' pk=car.pk %}"><button class="save btn bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Add car do observed</button></a>
		{% else %}
			<a href="{% url 'cars:car_observe' pk=car.pk %}"><button class="save btn bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Remove car from observed</button></a>
		{% endif %}
	{% endif %}

	{% if car.owner == request.user %}
		<a href='{% url "cars:car_edit" pk=car.pk %}'><button class="save btn bg-yellow-500 hover:yellow text-white font-bold py-2 px-4 rounded">Edit car</button></a>
		{% if car.update %}
			<p>Zaktualizowano {{ car.update }}</p>
		{% endif %}
	{% endif %}
	{% if car.owner == request.user%}
		{% if car.update %}
			<p>Ważność ogłoszenia {{ car.valid }}</p>
		{% endif %}
	{% endif %}

	<p>CARS PHOTOS</p>
	{% if car_images %}
		<!--wyświetlanie obrazów z poziomu modelu CarImage-->
<!--		{% for car_image in car_images %}-->
<!--			<p>{{ car_image.image.url }}</p>-->
<!--			<p>{{ car_image.image.get_image }}</p>-->
<!--			<img src = "{{ car_image.get_image }}" width="500px" height="500px" alt="img">-->
<!--		{% endfor %}-->
		<!--wyświetlanie obrazków w poziomu modelu Car-->
		{% for car_image_2 in car.get_all_images %}
			<p><img src = "{{ car_image_2.get_image }}" width="500px" height="500px" alt="img"></p>
			<p>{{ car_image_2.get_image }}</p>
		{% endfor %}
	{% else %}
		<p>No cars images here from CarImage class</p>
	{% endif %}

	{% if request.user == car.owner %}
		<a href="{% url 'cars:car_delete' pk=car.pk %}" class="save btn bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">DELETE CAR</a>
	{% endif %}

	<p>Więcej treści już w krótce.</p>
	{% include 'maps/map_main.html' %}
{% endblock %}